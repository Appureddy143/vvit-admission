<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html

    # Explicitly set the default file to serve in a directory
    DirectoryIndex index.php

    <Directory /var/www/html>
        # We are not using .htaccess, so this can be None for better performance
        AllowOverride None
        Require all granted
        
        # --- FINAL, MORE ROBUST ROUTING RULES ---
        RewriteEngine On

        # If the requested path is not a real file...
        RewriteCond %{REQUEST_FILENAME} !-f
        # ...and not a real directory...
        RewriteCond %{REQUEST_FILENAME} !-d

        # ...then rewrite the request to the same path with a .php extension.
        # This rule is more specific and avoids potential conflicts.
        # It matches any request that doesn't contain a dot.
        RewriteRule ^([^.]+)$ $1.php [NC,L]
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

